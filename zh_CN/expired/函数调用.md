# 函数调用

## 函数调用过程

函数调用前，先将需传入参数打包。打包的参数作为函数内的%n寄存器使用。

%res寄存器是存储输出参数的寄存器。通常将%res设置为调用时设置的结果寄存器。

fcal 传入的函数是一个整型的索引，函数的索引是平铺的。

每个文件都使用一个函数表。
函数表可以是共用的，也可以在每个文件内使用独立函数表。

CMS 在调用函数时，并不要求运行 CMS 代码的虚拟机（如CVM）或者进一步编译的程序能够自动检查函数调用的正确性。 CMS 提供了专门负责检查正确性的指令，编译器在产生 CMS 代码时，应该具有 **能够在编译期识别错误或者将在合适位置正确生成检查代码** 的能力。
